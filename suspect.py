from blockchain import blockexplorer
import time
import numpy as np

all_addresses = set()

#from 24/May to ...
for block_count in range(577477,578719):
    try:
        bl = blockexplorer.get_block_height(block_count)[0]
        print block_count,bl.time,bl.hash
        for tx in bl.transactions[1:]:
            if len(tx.inputs)<50 and len(tx.outputs)<50 and sum(o.value for o in tx.outputs) > 10**6:
                for i in tx.inputs:
                    all_addresses.add(i.address)
        #be gentle with blockchain.com...
        time.sleep(1)
    except:
        print 'Erro!'

print len(all_addresses)
np.save('suspect_wallets.npy',[a for a in all_addresses])
